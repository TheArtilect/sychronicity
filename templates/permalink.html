{% extends "base.html" %}

{% block content %}
    <p class='error'>{{error}}</p>

    {% if edit_post %}
    <h2>Edit your blog</h2>
    <form method="post">
        <label>
            <h3>Title</h3>
            <input type="text" name="title" value="{{post.title}}">
        </label>
        <br>

        <label>
            <h3>Posting</h3>
            <textarea name="change">{{ post.render_back() | safe }}</textarea>
        </label>

        <br>

        <input type="submit">
    </form>


    {% else %}


    <h3 class="post-title">{{ post.title }}</h3>

    <h4>By {{ post.creator }}</h4>

    <br>
    <div class="post-content">
        {{ post.rendered_content() | safe }}
    </div>
    <br>

    <p class="timestamp">{{post.last_modified.strftime("Last Modified: %b %d, %Y %I:%M %p")}}</p>

    <p class="timestamp">{{post.created.strftime("Created: %b %d, %Y %I:%M %p ")}}</p>
    <br>

    <p id="post-likes">{{likes}} Likes</p>

    <br>
    <form method="post">

        <input type="submit" name="likes" value="Like">
    </form>

    <form method='post'>
        <input type='submit' name="edit" value="Edit">
    </form>

    <form method="post">
        <input type='submit' name='delete_post' value="Delete">
    </form>
    <br>
    <br>

    <form method='post'>
        <h6>Post a comment below:</h6>
        <textarea name="comment" value=""></textarea>
        <br>
        <input type='submit'>
    </form>
    <br>

    {% endif %}


    {% if edit_comment %}
    <form method="post">
        <h5>Edit comment</h5>
        <textarea name='edit_comment_text'>{{comment_obj.unrender_comment() | safe}}</textarea>
        <input type='submit'>
    </form>
    {% endif %}


    {% for comment in comments %}

        <div class="comment">
            <h5 class="comment-header">{{comment.user}} said:</h5>
            <p class='comment-content'>{{comment.rendered_comment() | safe }}</p>
            <p>{{post.created.strftime("%I:%M %p on %b %d, %Y")}}<p>
            <form method='post'>
                <input type='hidden' name="edit_comment_id" value='{{comment.key().id()}}'>
                <input type='submit' name="edit_comment" value="Edit">
            </form>
        </div>
        <hr>

    {% endfor %}



{% endblock %}
